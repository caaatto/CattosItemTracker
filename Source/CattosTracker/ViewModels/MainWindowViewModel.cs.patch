// Add field to track last sent equipment
private string _lastSentEquipmentHash = "";

// In RefreshDataAsync, before sending to API:
var currentHash = ComputeEquipmentHash(allCharacters);
if (currentHash != _lastSentEquipmentHash)
{
    var success = await _apiClient.SendAllCharactersAsync(allCharacters);
    if (success)
    {
        _lastSentEquipmentHash = currentHash;
    }
}

// Add helper method:
private string ComputeEquipmentHash(List<CharacterData> characters)
{
    var sb = new StringBuilder();
    foreach (var char in characters.OrderBy(c => c.Character))
    {
        sb.Append(char.Character);
        if (char.LatestSnapshot?.Equipment != null)
        {
            foreach (var item in char.LatestSnapshot.Equipment.OrderBy(kv => kv.Key))
            {
                sb.Append($"{item.Key}:{item.Value},");
            }
        }
    }
    return sb.ToString();
}
